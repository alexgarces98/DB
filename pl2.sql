SET DATESTYLE TO 'dmy, dmy';


BEGIN TRANSACTION;
	DROP TABLE IF EXISTS  MUSICOS CASCADE;
	DROP TABLE IF EXISTS INSTRUMENTOS CASCADE;
	DROP TABLE IF EXISTS COMPOSITORES CASCADE;
	DROP TABLE IF EXISTS CANCIONES CASCADE;
END TRANSACTION;


CREATE TABLE INSTRUMENTOS (
	CODIGO_INSTRUMENTO varchar (10) PRIMARY KEY,
	NOMBRE_INSTRUMENTO varchar (20)
);

CREATE TABLE COMPOSITORES(
	CODIGO_COMPOSITOR varchar(10) PRIMARY KEY,
);

CREATE TABLE MUSICOS (
	NOMBRE_MUSICO varchar (10),
	DNI_MUSICO varchar (10) PRIMARY KEY,
	APELLIDOS_MUSICO varchar (30),
	DIRECCION_MUSICO varchar (30),
	CODIGO_POSTAL int,
	PROVINCIA varchar (30),
	NUMERO_TELEFONO int,
	
	INSTRUMENTO_MUSICO varchar (20),
	CODIGO_COMPOSITOR_MUSICO varchar (10),
	
	ES_INSTRUMENTISTA boolean,
	ES_COMPOSITOR boolean,
	
	CONSTRAINT FK_INSTRUMENTO_MUSICO FOREIGN KEY (INSTRUMENTO_MUSICO) REFERENCES INSTRUMENTOS(CODIGO_INSTRUMENTO),
	CONSTRAINT FK_COMPOSITOR_MUSICO FOREIGN KEY (CODIGO_COMPOSITOR_MUSICO) REFERENCES COMPOSITORES(CODIGO_COMPOSITOR)
);

CREATE TABLE CANCIONES (
	CODIGO_CANCION varchar (10) PRIMARY KEY,
	NOMBRE_CANCION varchar (20),
	DURACION_CANCION int,
	ARTISTA_COMPOSITOR varchar (10),
	
	CONSTRAINT FK_CANCION_COMPOSITOR FOREIGN KEY (ARTISTA_COMPOSITOR) REFERENCES COMPOSITORES (CODIGO_COMPOSITOR)
);
